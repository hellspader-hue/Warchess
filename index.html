<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Warchess</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0e0e0e;
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
}
h2 { margin: 8px 0; }

#top {
  display: flex;
  justify-content: space-between;
  padding: 6px 10px;
}
button {
  padding: 6px 10px;
  font-size: 14px;
}

#board {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  width: 96vmin;
  height: 96vmin;
  margin: auto;
  border: 3px solid #777;
}

.cell {
  display: flex;
  align-items: center;
  justify-content: center;
}
.white { background: #f0f0f0; }
.black { background: #444; }

.piece {
  width: 72%;
  height: 72%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3vmin;
  box-shadow: 0 5px 8px rgba(0,0,0,.6);
}

.red { background: radial-gradient(circle,#ffdede,#aa0000); }
.blue { background: radial-gradient(circle,#dde8ff,#0033aa); }

.highlight {
  background: rgba(255,255,0,0.35) !important;
}

#info {
  min-height: 48px;
  padding: 6px;
  font-size: 14px;
}
</style>
</head>

<body>

<h2>Warchess</h2>

<div id="top">
  <button onclick="spinFactions()">ğŸ¡ Spin Factions</button>
  <button onclick="showRules()">ğŸ“œ Rulebook</button>
</div>

<div id="board"></div>
<div id="info">Spin factions to begin</div>

<script>
/* ---------------- DATA ---------------- */

const factions = [
 {name:"Mongol", i:"ğŸ›¡ï¸", s:"ğŸ"},
 {name:"Roman", i:"ğŸ›¡", s:"ğŸ›"},
 {name:"Indian", i:"ğŸª”", s:"ğŸ˜"},
 {name:"Viking", i:"ğŸª“", s:"ğŸ›¶"},
 {name:"Persian", i:"ğŸ›¡ï¸", s:"ğŸ¹"},
 {name:"Chinese", i:"ğŸ€„", s:"ğŸ‰"},
 {name:"Greek", i:"ğŸº", s:"âš¡"},
 {name:"Egyptian", i:"ğ“‚€", s:"ğŸ"}
];

const pieces = {
 infantry:{moves:[[1,0]]},
 cavalry:{moves:[[2,1],[1,2]]},
 archer:{moves:[[0,1],[1,1]]},
 elephant:{moves:[[1,0],[0,1]]},
 general:{moves:[[1,0],[1,1]]}
};

let board=[], boardEl=document.getElementById("board");
let info=document.getElementById("info");
let selected=null, current="Red";
let side={Red:null,Blue:null};

/* ---------------- SETUP ---------------- */

function spinFactions(){
 side.Red=factions[Math.floor(Math.random()*8)];
 side.Blue=factions[Math.floor(Math.random()*8)];
 info.textContent=`Red: ${side.Red.name} | Blue: ${side.Blue.name}`;
 init();
}

function init(){
 board=[]; boardEl.innerHTML=""; selected=null; current="Red";
 for(let r=0;r<10;r++){
  board[r]=[];
  for(let c=0;c<10;c++){
   const cell=document.createElement("div");
   cell.className="cell "+((r+c)%2?"black":"white");
   cell.onclick=()=>select(r,c);
   boardEl.appendChild(cell);
   board[r][c]=null;
  }
 }
 setupSide("Red",1,0);
 setupSide("Blue",8,9);
 draw();
}

function setupSide(color,infRow,specRow){
 for(let i=0;i<10;i++)
  board[infRow][i]={t:"infantry",c:color};

 const lineup=["infantry","cavalry","archer","elephant","general","elephant","archer","cavalry","infantry","infantry"];
 lineup.forEach((t,i)=>board[specRow][i]={t,c:color});
}

/* ---------------- RENDER ---------------- */

function draw(){
 [...boardEl.children].forEach(c=>c.innerHTML="");
 for(let r=0;r<10;r++)for(let c=0;c<10;c++){
  let p=board[r][c];
  if(p){
   let d=document.createElement("div");
   d.className=`piece ${p.c=="Red"?"red":"blue"}`;
   d.textContent = p.t=="infantry" ? side[p.c].i :
                   p.t=="general" ? "ğŸ‘‘" : side[p.c].s;
   boardEl.children[r*10+c].appendChild(d);
  }
 }
}

/* ---------------- GAME LOGIC ---------------- */

function select(r,c){
 clear();
 let p=board[r][c];
 if(selected){
  if(isLegal(selected.r,selected.c,r,c)){
   board[r][c]=board[selected.r][selected.c];
   board[selected.r][selected.c]=null;
   current=current=="Red"?"Blue":"Red";
   draw();
   info.textContent=current+"'s turn";
  }
  selected=null;
  return;
 }
 if(!p||p.c!=current)return;
 selected={r,c};
 info.textContent=`${p.c} ${p.t}`;
 showMoves(r,c,p);
}

function showMoves(r,c,p){
 pieces[p.t].moves.forEach(m=>{
  let dir=p.c=="Red"?-1:1;
  let nr=r+dir*m[0], nc=c+m[1];
  if(board[nr]&&board[nr][nc]!==undefined)
   boardEl.children[nr*10+nc].classList.add("highlight");
 });
}

function isLegal(r,c,nr,nc){
 return board[nr]&&board[nr][nc]!==undefined;
}

function clear(){
 document.querySelectorAll(".highlight").forEach(h=>h.classList.remove("highlight"));
}

/* ---------------- RULES ---------------- */

function showRules(){
 alert(
`WARCHESS RULES

â€¢ 8 historical factions
â€¢ Infantry blocks attacks
â€¢ General cannot be captured unless in check
â€¢ Line-of-action check only
â€¢ You cannot move a piece that exposes your General
â€¢ Game ends only on CHECKMATE`
 );
}
</script>
</body>
</html>
